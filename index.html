<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>CAP_PocketProxy</title>
<style>
    @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;700&display=swap');

    :root {
        /* OG Colors from original */
        --primary-bg: #001f3f;
        --header-bg: #003366;
        --accent: #3399ff;
        --accent-hover: #66ccff;
        --input-bg: #002244;
        --input-border: #3399ff;
        --input-focus: #66ccff;
        --dropdown-bg: #fff;
        --dropdown-hover: #f1f1f1;
        --text-color: #ffffff;
        --title-color: #66ccff;
        --shadow: 0 2px 16px rgba(0,0,0,0.2);
        --radius: 12px;
        --transition: 0.2s cubic-bezier(.4,0,.2,1);
    }

    body {
        margin: 0;
        background: var(--primary-bg);
        font-family: 'Inter', 'Segoe UI', Arial, sans-serif;
        color: var(--text-color);
        display: flex;
        flex-direction: column;
        height: 100vh;
    }

    #topBar {
        display: flex;
        gap: 18px;
        padding: 12px 28px;
        background: var(--header-bg);
        border-bottom: 3px solid var(--accent);
        align-items: center;
        position: relative;
        z-index: 2;
        box-shadow: var(--shadow);
        flex-wrap: wrap;
    }

    #topBarTitle {
        font-size: 2rem;
        font-weight: 700;
        letter-spacing: 0.04em;
        color: var(--title-color);
        margin: 0;
        user-select: none;
        font-family: 'Inter', Arial, sans-serif;
        transition: color var(--transition);
        flex-shrink: 0;
        line-height: 1.1;
    }

    #urlInput {
        flex: 1;
        padding: 10px 18px;
        font-size: 1.05rem;
        border: 2px solid var(--input-border);
        border-radius: var(--radius);
        background: var(--input-bg);
        color: var(--accent-hover);
        outline: none;
        box-shadow: none;
        transition: border-color var(--transition), box-shadow var(--transition);
        min-width: 0;
    }

    #urlInput:focus {
        border-color: var(--input-focus);
        box-shadow: 0 0 10px var(--input-focus)66;
    }

    .button {
        padding: 10px 22px;
        font-size: 0.9rem;
        border: none;
        border-radius: var(--radius);
        cursor: pointer;
        background: var(--accent);
        color: #fff;
        font-weight: 600;
        box-shadow: 0 2px 6px #3399ff22;
        transition: background var(--transition), transform var(--transition), box-shadow var(--transition), color var(--transition);
        outline: none;
    }

    .button:active {
        transform: scale(0.98);
    }

    #goButton {
        background: var(--accent);
    }

    #goButton:hover, #dropdownBtn:hover {
        background: var(--accent-hover);
        color: var(--header-bg);
        box-shadow: 0 4px 16px #66ccff33;
        transform: scale(1.04);
    }

    /* Dropdown styles */
    .dropdown {
        position: relative;
        display: inline-block;
        margin-left: 0px;
    }

    #dropdownBtn {
        background: var(--accent-hover);
        color: #fff;
        min-width: 120px;
        text-align: center;
    }

    .dropdown-content {
        display: none;
        position: absolute;
        right: 0;
        background: var(--dropdown-bg);
        min-width: 200px;
        box-shadow: var(--shadow);
        z-index: 10;
        margin-top: 8px;
        border-radius: var(--radius);
        overflow: hidden;
        border: 1px solid var(--accent);
        animation: dropdown-in 0.25s cubic-bezier(.4,0,.2,1);
        max-height: 220px;
        overflow-y: auto;
    }

    @keyframes dropdown-in {
        0% { opacity: 0; transform: translateY(-10px);}
        100% { opacity: 1; transform: translateY(0);}
    }

    .dropdown-content a {
        color: #222;
        padding: 14px 22px;
        text-decoration: none;
        display: block;
        font-family: 'Inter', Arial, sans-serif;
        font-size: 1rem;
        transition: background var(--transition), color var(--transition);
    }

    .dropdown-content a:hover {
        background: var(--dropdown-hover);
        color: var(--accent-hover);
    }

    .dropdown.show .dropdown-content {
        display: block;
    }

    #iframeContainer {
        flex: 1;
        overflow: hidden;
        border-radius: 0 0 var(--radius) var(--radius);
        box-shadow: var(--shadow);
        background: var(--input-bg);
    }

    iframe {
        width: 100%;
        height: 100%;
        border: none;
        background: var(--input-bg);
        border-radius: 0 0 var(--radius) var(--radius);
    }

    /* Responsive */
    @media (max-width: 900px) {
        #topBarTitle { font-size: 1.4rem; }
        #topBar { gap: 10px; padding: 13px 9px;}
        .button, #dropdownBtn { padding: 11px 10px; font-size: 0.98rem; min-width: 90px;}
    }
    @media (max-width: 700px) {
        #topBar {
            flex-direction: column;
            align-items: stretch;
            gap: 10px;
            padding: 12px 4px;
        }
        #topBarTitle {
            margin-bottom: 2px;
        }
        #urlInput, .button, #dropdownBtn {
            width: 100%;
        }
        .button, #dropdownBtn {
            margin-top: 6px;
        }
        .dropdown { margin-left: 0; }
        .dropdown-content { right: auto; left: 0; min-width: 100%; }
    }

    /* Add subtle floating and fade-in for modern feel */
    #topBar, #iframeContainer {
        animation: fade-in 0.7s cubic-bezier(.4,0,.2,1);
    }
    @keyframes fade-in {
        0% { opacity: 0; transform: translateY(-12px);}
        100% { opacity: 1; transform: translateY(0);}
    }
</style>
</head>
<body>
<div id="topBar">
    <h1 id="topBarTitle">PocketProxy</h1>
    <input type="text" id="urlInput" placeholder="Enter URL..." autocomplete="off"/>
    <button class="button" id="goButton">Go</button>
    <div class="dropdown" id="optionsDropdown">
        <button class="button" id="dropdownBtn">Options ‚ñº</button>
        <div class="dropdown-content" id="dropdownMenu">
            <a href="#" id="homeOption">üè† Home</a>
            <a href="#" id="openInNewTab">üîó Open in New Tab</a>
            <a href="#" id="infoOption">‚ÑπÔ∏è Info</a> <!-- NEW: Info button -->
        </div>
    </div>
</div>
<div id="iframeContainer">
    <iframe id="proxiedFrame" src="https://cap-any-embed.vercel.app/embed.html#https://capminiproxy.vercel.app"></iframe>
</div>

<section id="infoContent" style="display:none;">
  <h2>Info</h2>
  <p>V 0.2.3</p>
  <p>This is a proxy that is designed to be in 1 simple html file.</p>
  <p>none of the proxy components are in this code.</p>
</section>
    
<script>
    const homeURL = "https://capminiproxy.vercel.app";
    const infoHTML = `<h1 style="text-align:center;color:#3399ff;font-family:Inter,Arial,sans-serif; margin-top: 2em;">V 0.2.1</h1>
    <p style="text-align:center;color:#fff;font-family:Inter,Arial,sans-serif;">Welcome to PocketProxy!</p>`;

    function formatURL(url) {
        url = url.trim();
        if (!url) return '';
        if (!/^https?:\/\//i.test(url)) {
            url = 'https://' + url;
        }
        return url;
    }

    let latestFormattedURL = '';

    function loadURL() {
        const input = document.getElementById('urlInput').value.trim();

        if (input === '//start') {
            latestFormattedURL = homeURL;
            updateFrame();
            return;
        }

        if (!input) return;

        const formattedURL = formatURL(input);
        latestFormattedURL = formattedURL;
        updateFrame();
    }

    function updateFrame() {
        const embedURL = "https://cap-any-embed.vercel.app/embed.html#" + latestFormattedURL;
        const iframe = document.getElementById('proxiedFrame');
        iframe.removeAttribute('srcdoc'); // Clear any info page
        iframe.src = embedURL;
    }

    document.getElementById('goButton').addEventListener('click', loadURL);

    document.getElementById('urlInput').addEventListener('keydown', (e) => {
        if (e.key === 'Enter') {
            e.preventDefault();
            loadURL();
        }
    });

    document.getElementById('dropdownBtn').addEventListener('click', (e) => {
        e.stopPropagation();
        document.getElementById('optionsDropdown').classList.toggle('show');
    });

    window.addEventListener('click', (event) => {
        const dropdown = document.getElementById('optionsDropdown');
        if (!dropdown.contains(event.target)) {
            dropdown.classList.remove('show');
        }
    });

    document.getElementById('homeOption').addEventListener('click', (e) => {
        e.preventDefault();
        latestFormattedURL = homeURL;
        updateFrame();
        document.getElementById('optionsDropdown').classList.remove('show');
    });

    document.getElementById('openInNewTab').addEventListener('click', (e) => {
        e.preventDefault();
        if (latestFormattedURL) {
            const embedURL = "https://cap-any-embed.vercel.app/embed.html#" + latestFormattedURL;
            window.open(embedURL, "_blank");
        } else {
            alert("Enter a URL and click Go first!");
        }
        document.getElementById('optionsDropdown').classList.remove('show');
    });

    // NEW: Show info HTML in iframe
   document.getElementById('infoOption').addEventListener('click', (e) => {
       e.preventDefault();
       const iframe = document.getElementById('proxiedFrame');
       const infoHTML = document.getElementById('infoContent').innerHTML; // Get HTML from section
       iframe.removeAttribute('src'); // Remove external src
       iframe.srcdoc = infoHTML; // Set the info HTML from the section
       document.getElementById('optionsDropdown').classList.remove('show');
   });
    
</script>
</body>
</html>
